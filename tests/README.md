# Simple Test System for data-dumpster-diver

Ultra-minimal test system that focuses on what matters: verifying your CLI works without complexity.

## Quick Start

```bash
# Run all tests
npm test

# Run specific test suites
npm run test:basic        # Basic CLI tests only
npm run test:workflows    # Workflow tests (needs test data)
npm run test:with-logs    # Tests with detailed logging
```

## Test Data Setup

```bash
# Generate synthetic test data (required for workflow tests)
npm run test:setup
```

## What These Tests Do

### Basic Tests (`tests/minimal-test.sh`)

- ✓ CLI shows help
- ✓ All commands have help available
- ✓ Commands don't crash when run
- ✓ Invalid commands fail properly

### Workflow Tests (`tests/minimal-workflow-test.sh`)

- ✓ Create dumpster from ZIP file
- ✓ Dumpsters appear in hoard list
- ✓ Can rummage through dumpsters
- ✓ Export to txt/md/html formats
- ✓ Clean up (burn) dumpsters

## Key Benefits

**Simple & Direct**: Just bash commands with clear pass/fail
**No Complexity**: No frameworks, no abstractions, no overhead
**Easy to Debug**: See exactly what commands are run
**Fast Feedback**: Instant results, minimal logging
**Self-Cleaning**: Automatically removes test files and exports

## Understanding Output

```text
Testing CLI help... ✓          # Test name and result
=== Results ===               # Summary
Passed: 9                    # Number that passed
Failed: 0                    # Number that failed
Total: 9                     # Total run
All tests passed!             # Overall status
```

## Optional Logging

By default, tests show only console output. For detailed logs:

```bash
# Enable logging for one run
LOG_TESTS=true npm test

# Or use preset
npm run test:with-logs
```

Log files are created in `tests/logs/` with timestamp filenames.

## File Structure

```text
tests/
├── generate-test-data.js    # Test data generator (KEEP)
├── minimal-test.sh          # Basic CLI tests
├── minimal-workflow-test.sh # Workflow tests
├── simple-test.sh          # Main test runner
└── [test data files]       # Generated by setup
```

## Cleanup

Tests automatically clean up after themselves. For manual cleanup:

```bash
# Remove all test files and exports
npm run test:cleanup
```

## Customizing Tests

To add new tests, edit the appropriate test file:

```bash
# Add basic command test
test "my new feature" "node cli.js my-feature --help"

# Add workflow test
test "export to pdf" "node cli.js upcycle pdf test-dumpster"
```

The ultra-minimal approach makes testing straightforward and maintainable.
